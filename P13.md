# P13

*2024/07/01*

## P13 委托相关设计

1. Composite（设计模式）
	
	比如设计一个文件目录系统，一个目录既包含文件，也包含另外的目录。可以在 Composite（目录类）中包含一个容器数据类型（vector），该容器应该既能包含 Composite (目录) 本身，也能包含 Primitive（单体文件）。那么可以写一个 Composite 和 Primitive 的共同父类（Inheritance），然后把其指针（delegation）放进这个容器，这样这个容器里的这个父类的对象就可以是 Composite 也可以是 Primitive了。
	
2. Prototype（设计模式）

	让父类能够访问操作子类对象的一种设计模式。子类继承父类，但父类没办法看到还未创建的子类（未创建是指父类是提前写好的，但是子类是买来父类并继承他的时候才创建的）。在这种设计模式下，每一个新创建的子类会创建一个对象，也就是 prototype，然后返还给父类，这样父类就可以根据这个对象来复制出一个自己使用。
	
	可能的例子：
	
	现在 prototype 只有经典的 jpg, bmp 等扩展名，而某个公司自发明了新的图片格式 landsat，它的扩展名不在父类的 prototype 里，文件浏览器就不会当它是图片文件，就触发不了缩略图功能。当然这个公司没办法直接修改 image 父类，因为他是系统做好的。
所以系统的设计人员预想到了这个情况，预留了原型的功能，这个公司就能从 landsat 这边给 clone 一个 prototype 对象，追加扩展名来解决这个问题。